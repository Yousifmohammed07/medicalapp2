<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <title>ููุฒูุงุก ุงูุณููุงุฑ - ูุงููุฑุง ุทุจูุฉ</title>
</head>
<body>
    <nav>
        <a href="index.html" class="logo">ูุงููุฑุง ุทุจูุฉ ๐ท</a>
        <div class="dropdown">
            <button onclick="toggleMenu()" class="dropbtn">ุงููุงุฆูุฉ โฐ</button>
            <div id="myDropdown" class="dropdown-content">
               <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
                <a href="physics_calc.html">ุงูุญุงุณุจุฉ ุงูููุฒูุงุฆูุฉ ๐งฎ</a>
                <a href="contrast_guide.html">ุฏููู ุงูุตุจุบุงุช ๐งช</a>
                <a href="exam.html">ูุฑูุฒ ุงูุงุฎุชุจุงุฑุงุช</a>
                <a href="anatomy.html">ุชุญุฏู ุงูุชุดุฑูุญ</a>
                <a href="atlas.html">ุฃุทูุณ ุงููุถุนูุงุช</a>
                <a href="artifacts.html">ูุฎุชุจุฑ ุงูุตูุฑ</a>
                <a href="safety.html">ุชุญุฏู ุงูุณูุงูุฉ</a>
                <a href="ct.html">CT Scan</a>
                <a href="xray.html">X-ray</a>
                <a href="mri.html">MRI</a>
                <a href="ultrasound.html">ููุฒูุงุก ุงูุณููุงุฑ ๐</a>
                <a href="qc_lab.html">ูุฎุชุจุฑ ุงูุฑูุงุจุฉ ุงูููุนูุฉ ๐๏ธ</a>
                <a href="protection.html">ุงูููุงูุฉ ุงูุฅุดุนุงุนูุฉ ๐ก๏ธ</a>
                <a href="physics_sim.html">ูุญุงูู ุงูููุฒูุงุก โ๏ธ</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1 style="text-align:center; color:var(--yellow); margin-top:20px;">๐ ูุฎุชุจุฑ ููุฒูุงุก ุงูููุฌุงุช ููู ุงูุตูุชูุฉ</h1>
        <p style="text-align:center; color:#ccc;">ุงุณุชูุดู ุนุงูู ุงูููุฌุงุช ุงููููุงููููุฉ ูุชุทุจููุงุชูุง ูู ุงูุชุดุฎูุต ุงูุทุจู.</p>
        
        <div id="lessons-grid" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(280px, 1fr)); gap:20px; margin-top:30px;">
            </div>
    </div>

    <div id="modal" class="modal" style="display:none; position:fixed; z-index:2000; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); overflow-y:auto;">
        <div class="modal-content" style="background:var(--bg-color); margin:5% auto; padding:25px; width:90%; max-width:800px; border-radius:20px; border:2px solid var(--orange);">
            <span onclick="closeM()" style="float:left; font-size:30px; cursor:pointer; color:var(--orange);">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <script>
        window.onload = function() {
            const grid = document.getElementById('lessons-grid');
            const lessons = JSON.parse(localStorage.getItem('us_lessons')) || [];
            if(lessons.length === 0) { grid.innerHTML = "<p style='text-align:center; grid-column:1/-1;'>ูุฑูุจุงู.. ุณูุชู ุฅุถุงูุฉ ุดุฑูุญุงุช ุงูุณููุงุฑ.</p>"; return; }
            
            grid.innerHTML = lessons.map((l, i) => `
                <div class="card" style="cursor:pointer; text-align:center;" onclick="openL(${i})">
                    <h3 style="color:var(--yellow)">${l.titleAr}</h3>
                    <p style="color:gray; font-size:0.8rem;">${l.titleEn}</p>
                    <button class="btn-primary" style="width:auto; padding:5px 20px;">ุงุจุฏุฃ ุงูุฏุฑุณ ๐</button>
                </div>
            `).join('');
        };

        function openL(i) {
            const lessons = JSON.parse(localStorage.getItem('us_lessons'));
            const lesson = lessons[i];
            const body = document.getElementById('modal-body');
            let html = `<h2 style="color:var(--yellow)">${lesson.titleAr}</h2><hr style="border:0.5px solid #333; margin-bottom:20px;">`;
            
            lesson.content.forEach(b => {
                if(b.type === 'text') html += `<p style="line-height:1.7; margin-bottom:15px; white-space:pre-line;">${b.value}</p>`;
                else html += `<img src="${b.value}" style="width:100%; border-radius:10px; border:2px solid var(--orange); margin-bottom:15px;">`;
            });

            body.innerHTML = html;
            document.getElementById('modal').style.display = "block";
            if(window.MathJax) MathJax.typesetPromise([body]);
        }

        function closeM() { document.getElementById('modal').style.display = "none"; }
        function toggleMenu() { document.getElementById("myDropdown").classList.toggle("show"); }
    </script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="firebase-config.js"></script>
    
    <script>
    window.onload = async function() {
        const COLLECTION = "ultrasound"; // ๐ก ููุณ ุงูุงุณู ุงููุณุชุฎุฏู ูู ุงูุฅุฏุงุฑุฉ
        const snap = await db.collection(COLLECTION).orderBy("createdAt", "desc").get();
        
        document.getElementById('display-grid').innerHTML = snap.docs.map(doc => `
            <div class="card">
                <h3>${doc.data().title}</h3>
                <p>${doc.data().desc}</p>
            </div>
        `).join('');
    };
</script>
</body>
</html>